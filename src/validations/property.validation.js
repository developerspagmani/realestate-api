const Joi = require('joi');

module.exports = {
    createProperty: Joi.object({
        tenantId: Joi.string().uuid().required(),
        propertyType: Joi.number().integer().valid(1, 2, 3, 4).required(),
        title: Joi.string().min(2).max(200).required(),
        slug: Joi.string().min(2).max(100).optional().allow('', null),
        description: Joi.string().max(1000).optional().allow('', null),
        addressLine1: Joi.string().min(5).max(200).required(),
        addressLine2: Joi.string().max(200).optional().allow('', null),
        city: Joi.string().min(2).max(100).required(),
        state: Joi.string().min(2).max(100).required(),
        country: Joi.string().min(2).max(100).optional().allow('', null),
        postalCode: Joi.string().min(3).max(20).optional().allow('', null),
        latitude: Joi.number().optional().allow(null),
        longitude: Joi.number().optional().allow(null),
        status: Joi.number().integer().valid(1, 2, 3).optional(),
        mainImageId: Joi.string().uuid().optional().allow('', null),
        gallery: Joi.array().items(Joi.string().uuid()).optional().allow(null),
        area: Joi.number().integer().min(0).optional().allow(null),
        floorPlanId: Joi.string().uuid().optional().allow('', null),
        brochureId: Joi.string().uuid().optional().allow('', null),
        amenities: Joi.array().items(Joi.string().uuid()).optional().allow(null),
        yearBuilt: Joi.number().integer().min(1800).max(new Date().getFullYear() + 5).optional().allow(null),
        neighborhood: Joi.string().max(200).optional().allow('', null),
        parkingSpaces: Joi.number().integer().min(0).optional().allow(null),
        bedrooms: Joi.number().integer().min(0).optional().allow(null),
        bathrooms: Joi.number().precision(1).min(0).optional().allow(null),
        lotSize: Joi.number().precision(2).min(0).optional().allow(null),
        listingType: Joi.string().valid('sale', 'rent', 'lease').optional().allow('', null),
        categoryId: Joi.string().uuid().optional().allow('', null),
        videoUrl: Joi.string().uri().optional().allow('', null),
        metadata: Joi.any().optional()
    }),

    updateProperty: Joi.object({
        tenantId: Joi.string().uuid().optional(),
        propertyType: Joi.number().integer().valid(1, 2, 3, 4).optional(),
        title: Joi.string().min(2).max(200).optional(),
        slug: Joi.string().min(2).max(100).optional().allow('', null),
        description: Joi.string().max(1000).optional().allow('', null),
        addressLine1: Joi.string().min(5).max(200).optional(),
        addressLine2: Joi.string().max(200).optional().allow('', null),
        city: Joi.string().min(2).max(100).optional(),
        state: Joi.string().min(2).max(100).optional(),
        country: Joi.string().min(2).max(100).optional(),
        postalCode: Joi.string().min(3).max(20).optional(),
        latitude: Joi.number().optional().allow(null),
        longitude: Joi.number().optional().allow(null),
        status: Joi.number().integer().valid(1, 2, 3).optional(),
        mainImageId: Joi.string().uuid().optional().allow('', null),
        gallery: Joi.array().items(Joi.string().uuid()).optional().allow(null),
        area: Joi.number().integer().min(0).optional().allow(null),
        floorPlanId: Joi.string().uuid().optional().allow('', null),
        brochureId: Joi.string().uuid().optional().allow('', null),
        amenities: Joi.array().items(Joi.string().uuid()).optional().allow(null),
        yearBuilt: Joi.number().integer().min(1800).max(new Date().getFullYear() + 5).optional().allow(null),
        neighborhood: Joi.string().max(200).optional().allow('', null),
        parkingSpaces: Joi.number().integer().min(0).optional().allow(null),
        bedrooms: Joi.number().integer().min(0).optional().allow(null),
        bathrooms: Joi.number().precision(1).min(0).optional().allow(null),
        lotSize: Joi.number().precision(2).min(0).optional().allow(null),
        listingType: Joi.string().valid('sale', 'rent', 'lease').optional().allow('', null),
        categoryId: Joi.string().uuid().optional().allow('', null),
        videoUrl: Joi.string().uri().optional().allow('', null),
        metadata: Joi.any().optional()
    }),

    assignProperty: Joi.object({
        agentId: Joi.string().uuid().required(),
        propertyId: Joi.string().uuid().required(),
        commissionRate: Joi.number().min(0).max(100).optional(),
        isPrimary: Joi.boolean().optional(),
        status: Joi.number().integer().valid(1, 2).optional(),
        notes: Joi.string().max(1000).optional().allow('', null),
    }),
};
